generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")    // 应用运行时池化
  directUrl = env("DIRECT_URL")      // 迁移直连
}


enum Priority {
  low
  medium
  high
  urgent
}

enum Status {
  todo
  in_progress
  done
  blocked
  canceled
}

enum RepeatType {
  none
  daily
  weekly
  every_n_days
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  tasks Task[]
}

model Task {
  id             String      @id @default(cuid())
  title          String
  content        String      @default("")
  goal           String?
  completed      Boolean     @default(false)
  priority       Priority    @default(medium)
  estimate       Int?
  dueDate        DateTime?
  status         Status      @default(todo)
  repeatType     RepeatType  @default(none)
  repeatInterval Int?
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  totalTimeSpent Int         @default(0) // 单位秒
  jack Int         @default(0) // 单位秒
  
  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
}
